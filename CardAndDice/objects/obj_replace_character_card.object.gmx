<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_mini_card</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(obj_FORMATION_MANAGER) {ds_list_add(obj_FORMATION_MANAGER.formation_parts_list,id)}

owner_id = ct_argument[0]
original_card_id = ct_argument[1]

//알람박스 관련
notice_box_return = ""

//슬롯 관련
my_slot = instance_nearest(x,y,obj_replace_card_slot)
my_slot.slot_owner = id
x = my_slot.x
y = my_slot.y

//체인지 관련
move = false

//캐릭터 정보
character_number = original_card_id.character_number
name = original_card_id.name
hangul_name = original_card_id.hangul_name
card_portrait = original_card_id.card_portrait
reason_for_entering_the_cafe = original_card_id.reason_for_entering_the_cafe

//능력치
attack_power = original_card_id.attack_power
defence_power = original_card_id.defence_power
rapid_power = original_card_id.rapid_power
taunt_power = original_card_id.taunt_power
skill_level = original_card_id.skill_level

//부속물
skill_slot = ds_list_create()
for(var i = 0; i &lt; ds_list_size(original_card_id.skill_list); i++)
{
    var yy = y - sprite_get_height(spr_mini_card)/2 - sprite_get_height(spr_skill_card)/2 - sprite_get_height(spr_skill_card) * i
    var target = instance_create_v(x,yy,obj_replace_skill_slot,id,undefined)
    instance_create_v(x,yy,obj_replace_skill_card,owner_id,original_card_id.skill_list[|i])
    ds_list_add(skill_slot,target)
}
equipment_slot = ds_list_create()
for(var i = 0; i &lt; original_card_id.equipment_slot_max; i++)
{
    var xx = x - 75 + 75*i
    var yy = y + 160
    var target = instance_create_v(xx,yy,obj_replace_equipment_slot,id,undefined)
    instance_create_v(xx,yy,obj_replace_equipment_card,owner_id,original_card_id.equipment_slot[i])
    ds_list_add(equipment_slot,target)
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>for(var i = 0; i &lt; ds_list_size(skill_slot); i++)
{
    if !is_undefined(skill_slot[| i]) 
    {
        instance_destroy(skill_slot[|i].slot_owner)
        instance_destroy(skill_slot[|i])
    }
}
for(var i = 0; i &lt; ds_list_size(equipment_slot); i++)
{
    if !is_undefined(equipment_slot[| i]) 
    {
        instance_destroy(equipment_slot[|i].slot_owner)
        instance_destroy(equipment_slot[|i])
    }
}
ds_list_destroy(skill_slot)
ds_list_destroy(equipment_slot)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="56">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if move
{
    move = false
    owner_id.pick_up_card = undefined
    nearest_slot = instance_nearest(x,y,obj_replace_card_slot)
    
    if nearest_slot.object_index = obj_formation_go_cafe_slot
    {
        if notice_box_return = ""
        {
            make_notice_box(name+"을 카페로 보내는 것이 맞습니까?",id)
        }
    }else
    {
        if is_undefined(nearest_slot.slot_owner)
        {
            my_slot.slot_owner = undefined
            nearest_slot.slot_owner = id
            my_slot = nearest_slot
            
        }else
        {
            nearest_slot.slot_owner.my_slot = my_slot
            my_slot.slot_owner = nearest_slot.slot_owner
            nearest_slot.slot_owner = id
            my_slot = nearest_slot 
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if is_undefined(owner_id.pick_up_card) 
{
    move = true
    owner_id.pick_up_card = id
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//카드 움직임
depth = -1000
if move
{
    x = mouse_x
    y = mouse_y
    depth = -1010
    for(var i = 0; i &lt; ds_list_size(skill_slot); i++) {skill_slot[|i].depth = -1011}
    for(var i = 0; i &lt; ds_list_size(equipment_slot); i++) {equipment_slot[|i].depth = -1011}
}else
{
    x = my_slot.x
    y = my_slot.y
    depth = -1000
    for(var i = 0; i &lt; ds_list_size(skill_slot); i++) {skill_slot[|i].depth = -1001}
    for(var i = 0; i &lt; ds_list_size(equipment_slot); i++) {equipment_slot[|i].depth = -1001}
}
draw_sprite(spr_mini_card,0,x,y)
draw_sprite(card_portrait,0,x,y)
draw_sprite(spr_portrait_outline,0,x,y)
draw_sprite(spr_replace_equipment_bar,0,x,y+160)

//카드 능력치 요약
if mouse_enter() and !move and is_undefined(owner_id.pick_up_card)
{
    var xx = x - sprite_get_width(spr_card_mini_spec)/2
    var yy = y - sprite_get_height(spr_card_mini_spec)/2
    draw_sprite(spr_card_mini_spec,0,xx,yy)
    
    draw_set_font(ft_Ingame_font)
    draw_set_color(c_white)
    draw_set_valign(fa_top)
    draw_set_halign(fa_left)
    var xx2 = xx +16
    var yy2 = yy +16
    draw_text(xx2,yy2,"공격력: "+string(attack_power))
    draw_text(xx2,yy2+32,"방어력: "+string(defence_power))
    draw_text(xx2,yy2+64,"신속: "+string(rapid_power))
    draw_text(xx2,yy2+96,"도발: "+string(taunt_power))
    var skill_level_str = "빈번히 실패함"
    switch skill_level
    {
        case 0: {skill_level_str = "빈번히 실패함" break;}
        case 1: {skill_level_str = "가끔 실패함" break;}
        case 2: {skill_level_str = "무난함" break;}
        case 3: {skill_level_str = "능숙함" break;}
        case 4: {skill_level_str = "달인" break;}
    }
    draw_text(xx2,yy2+150,"숙련도#     "+skill_level_str)
}

//부속품도 같이 움직임
for(var i = 0; i &lt; ds_list_size(skill_slot); i++)
{
    var yy = y - sprite_get_height(spr_mini_card)/2 - sprite_get_height(spr_skill_card)/2 - sprite_get_height(spr_skill_card) * i;
    skill_slot[|i].x = x
    skill_slot[|i].y = yy
}
for(var i = 0; i &lt; ds_list_size(equipment_slot); i++)
{
    equipment_slot[|i].x = x - 75 + 75 * i
    equipment_slot[|i].y = y + 160
    equipment_slot[|i].depth = depth - 2
}

if notice_box_return = "확인"
{
    notice_box_return = ""
    original_card_id.reason_for_entering_the_cafe = "편성창에서 카페로 보내짐"
    my_slot.slot_owner = undefined
    card_cafe_enter(original_card_id)
    instance_destroy()
}

if notice_box_return = "취소"
{
    notice_box_return = ""
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
